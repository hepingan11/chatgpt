"use strict";(self["webpackChunkchatgpt"]=self["webpackChunkchatgpt"]||[]).push([[602],{7220:function(e,t,o){function r(e){const t=6e4,o=60*t,r=24*o,a=7*r,l=30*r,n=(new Date).getTime(),i=n-e;if(i<0)return;let s;return s=i<=t?"刚刚":i<=o?Math.floor(i/t)+"分钟前":i<=r?Math.floor(i/o)+"小时前":i<=a?Math.floor(i/r)+"天前":i<=l?Math.floor(i/a)+"周前":i<=12*l?Math.floor(i/l)+"月前":Math.floor(i/(12*l))+"年前",s}o.d(t,{Z:function(){return r}})},185:function(e,t,o){o.d(t,{Z:function(){return h}});var r=o(3396),a=o(7139);const l=e=>((0,r.dD)("data-v-598979df"),e=e(),(0,r.Cn)(),e),n={class:"ViewState ViewStateCenter"},i={key:0,class:"ViewStateLoad"},s=l((()=>(0,r._)("div",{class:"loadAnimation"},null,-1))),u={class:"loadText"},d={key:1,class:"errCen"};function p(e,t,o,l,p,c){const g=(0,r.up)("el-empty");return(0,r.wg)(),(0,r.iD)("div",n,["load"===e.Type?((0,r.wg)(),(0,r.iD)("div",i,[s,(0,r._)("div",u,(0,a.zw)(e.LoadText),1)])):"empty"===e.Type||"error"===e.Type?((0,r.wg)(),(0,r.iD)("div",d,[(0,r.Wm)(g,{class:"ViewStateCover",description:"empty"===e.Type?e.EmptyText:e.ErrorText},null,8,["description"]),e.IsShowBottom?((0,r.wg)(),(0,r.iD)("div",{key:0,onClick:t[0]||(t[0]=(...t)=>e.clickTheButton&&e.clickTheButton(...t)),"hover-class":"empty-but-hover","hover-start-time":"0","hover-stay-time":"0",class:"ViewStateBottom"},(0,a.zw)(e.ButtonText),1)):(0,r.kq)("",!0)])):(0,r.kq)("",!0)])}var c=(0,r.aZ)({name:"ViewState",props:{Type:{type:String,default:"load"},LoadText:{type:String,default:"加载中..."},EmptyText:{type:String,default:"数据为空"},ErrorText:{type:String,default:"加载错误"},ButtonText:{type:String,default:"重新加载"},ErrorCover:{type:String,default:"@/assets/error.svg"},EmptyCover:{type:String,default:"@/assets/empty.svg"},IsShowBottom:{type:Boolean,default:!1}},setup(e,{emit:t}){function o(){t("ClickTheButton")}return{clickTheButton:o}}}),g=o(89);const y=(0,g.Z)(c,[["render",p],["__scopeId","data-v-598979df"]]);var h=y},4602:function(e,t,o){o.r(t),o.d(t,{default:function(){return k}});var r=o(3396),a=o(7139);const l=e=>((0,r.dD)("data-v-b6cdb3b6"),e=e(),(0,r.Cn)(),e),n={class:"body"},i={key:4,class:"container"},s={class:"tab-box"},u={style:{display:"flex","background-color":"var(--themeColor1)",height:"140px","margin-bottom":"40px","align-items":"center","border-radius":"3px","box-shadow":"0 2px 6px var(--bgColor1)"}},d={style:{"padding-left":"40px",color:"white"}},p={style:{"font-size":"35px","font-weight":"600"}},c=l((()=>(0,r._)("div",{style:{"font-size":"15px","margin-top":"5px","padding-left":"5px"}}," 总打赏金额 ",-1))),g={style:{display:"flex","justify-content":"right","padding-top":"10px"}};function y(e,t,o,l,y,h){const m=(0,r.up)("ViewState"),v=(0,r.up)("el-table-column"),f=(0,r.up)("el-table"),b=(0,r.up)("el-pagination"),w=(0,r.up)("LoginDialog");return(0,r.wg)(),(0,r.iD)("div",n,[h.store.getters.userinfo?l.load?((0,r.wg)(),(0,r.j4)(m,{key:1,class:"state",LoadText:"正在加载，请稍后..."})):l.empty?((0,r.wg)(),(0,r.j4)(m,{key:2,class:"state",Type:"empty",ErrorText:"暂无任何创作的数据"})):l.error?((0,r.wg)(),(0,r.j4)(m,{key:3,class:"state",onClickTheButton:t[1]||(t[1]=e=>l.handleCurrentChange(1)),Type:"error",ErrorText:"加载错误，请重试",IsShowBottom:"",ButtonText:"重新加载"})):((0,r.wg)(),(0,r.iD)("div",i,[(0,r._)("div",s,[(0,r._)("div",u,[(0,r._)("div",d,[(0,r._)("div",p,"￥"+(0,a.zw)(l.amount),1),c])]),(0,r.Wm)(f,{data:l.dataTables,height:"350px","header-cell-style":{background:" var(--bgColor1)"},style:{"background-color":"var(--bgColor1)"},"row-style":{height:"100%",background:" var(--bgColor1)"}},{default:(0,r.w5)((()=>[(0,r.Wm)(v,{prop:"ordersId",label:"订单号"}),(0,r.Wm)(v,{prop:"productName",label:"商品名称"}),(0,r.Wm)(v,{prop:"frequency",label:"获赠Ai币"}),(0,r.Wm)(v,{prop:"productPrice",label:"价格"}),(0,r.Wm)(v,{prop:"payTime",label:"支付时间"}),(0,r.Wm)(v,{prop:"state",label:"支付状态"})])),_:1},8,["data","header-cell-style","row-style"]),(0,r._)("div",g,[(0,r.Wm)(b,{layout:"prev, pager, next",total:l.total,"page-size":15,background:"",onCurrentChange:l.handleCurrentChange},null,8,["total","onCurrentChange"])])])])):((0,r.wg)(),(0,r.j4)(m,{key:0,class:"state",Type:"error",ErrorText:"登录后查看",IsShowBottom:"",ButtonText:"登录",onClickTheButton:t[0]||(t[0]=e=>l.loginVisible=!0)})),(0,r.Wm)(w,{show:l.loginVisible,onClose:t[2]||(t[2]=e=>l.loginVisible=!1),onLoginSucceeded:t[3]||(t[3]=e=>l.handleCurrentChange(1))},null,8,["show"])])}var h=o(4870),m=o(4239),v=o(7278),f=o(185),b=o(718),w=o(7220),T={name:"ordersView",computed:{store(){return m.Z}},components:{LoginDialog:b.Z,ViewState:f.Z},setup(){let e=(0,h.iH)(!1);const t=(0,h.iH)([]),o=(0,h.iH)(1),a=(0,h.iH)(0),l=(0,h.iH)(0);let n=(0,h.iH)(!0),i=(0,h.iH)(!1),s=(0,h.iH)(!1);async function u(e){try{let r=await(0,v.Kq)(e),u=r.orders;u.records.length>0?(u.records.forEach((e=>{if(0===e.state&&(e.state="待支付",e.payTime="---"),1===e.state){e.state="已完成";let t=e.payTime;e.payTime=(0,w.Z)(t)}2===e.state&&(e.state="已取消",e.payTime="---"),e.productPrice=e.productPrice+"元",e.frequency=e.frequency+"个"})),t.value=u.records,o.value=u.current,a.value=u.total,l.value=r.totalAmount):i.value=!0,n.value=!1,s.value=!1}catch(r){n.value=!1,s.value=!0}}return(0,r.bv)((()=>{m.Z.getters.userinfo&&u(o.value)})),{load:n,error:s,empty:i,amount:l,total:a,loginVisible:e,handleCurrentChange:u,dataTables:t}}},x=o(89);const C=(0,x.Z)(T,[["render",y],["__scopeId","data-v-b6cdb3b6"]]);var k=C}}]);